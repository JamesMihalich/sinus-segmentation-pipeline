# Bounding Box Pipeline - Default Configuration
# Copy this file and modify for your experiments

# Paths (use environment variables or absolute paths)
data_root: null  # Set to your NPZ dataset directory
output_root: ./training_logs
checkpoint_path: null  # Set for inference/fine-tuning

# Model Configuration
model:
  architecture: BBoxRegressor3D
  input_size: [128, 128, 128]
  in_channels: 1
  base_channels: 32
  dropout: 0.3  # Reduced from 0.5 for better gradient flow

# Training Hyperparameters
training:
  batch_size: 4
  learning_rate: 0.0001
  weight_decay: 0.0001  # Added L2 regularization
  epochs: 100  # Increased from 50
  num_workers: 4

  # Optimizer
  optimizer: Adam

  # Scheduler (ReduceLROnPlateau)
  scheduler: ReduceLROnPlateau
  scheduler_factor: 0.5
  scheduler_patience: 3
  scheduler_min_lr: 0.000001

  # Data split
  train_ratio: 0.8
  val_ratio: 0.2
  split_seed: 42

  # Checkpointing
  save_every: 5
  snapshot_every: 5

# Preprocessing Settings (for generating dataset from NIfTI)
preprocessing:
  target_shape: [128, 128, 128]
  window_level: 600.0   # CT window center (HU)
  window_width: 1250.0  # CT window width (HU)

# Data Augmentation (training only)
augmentation:
  enabled: true
  flip_prob: 0.5
  intensity_shift_range: 0.1
  intensity_scale_range: 0.1

# Inference Settings
inference:
  target_shape: [128, 128, 128]
